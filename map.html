<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="leaflet/leaflet.css">
    <script src="leaflet/leaflet.js"></script>
    <script src="markers.js"></script>
    <style>
      body {
          padding: 0;
          margin: 0;
      }
      html, body, #image-map {
          height: 100%;
          width: 100%;
      }

      .leaflet-container {
        background: white;
      }
    </style>
  </head>
  <body>
    <div id="image-map"></div>

    <script>
      // Using leaflet.js with a simple image
      // Tutorial : http://leafletjs.com/examples/crs-simple/crs-simple.html
      var map = L.map('image-map', {
        minZoom: -2,
        crs: L.CRS.Simple
      });
      /* dimensions of the image
          width = 4961
          height = 3508
          url = 'images/fond.jpg'
      */
      var bounds = [[0,0], [3508,4961]];
      var image = L.imageOverlay('images/fond.jpg', bounds).addTo(map);
      map.fitBounds(bounds);

      // Adding markers
      // needs a markers array defined e.g.
      /*
      var markers = [
      {
        lat: -438.5,
        lng: 500,
        popup: "<p>hello</p>"
      },
      {
        lat: -97,
        lng: 156,
        popup: "<p>World</p>"
      }];
      */
      var plantList = [];
      var placeList = [];

      plantList = plants.map(customMarker => {
        return L.marker(customMarker).bindPopup(customMarker.popup, { minWidth: 200 })
      });

      placeList = places.map(customMarker => {
        return L.marker(customMarker).bindPopup(customMarker.popup, { minWidth: 200})
      });

      var plantLayerGroup = L.layerGroup(plantList);
      var placeLayerGroup = L.layerGroup(placeList);

      var overlayMaps = {
        "Plantes": plantLayerGroup.addTo(map),
        "Aménagements": placeLayerGroup
        "Aménagements": placeLayerGroup.addTo(map)
      };

      L.control.layers(null, overlayMaps).addTo(map);
      L.control.layers(null, overlayMaps, {collapsed: false}).addTo(map);

      // A way to get leaflet coordinates with right click
      map.on('contextmenu', function(e) {
          alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng)
      });
    </script>

  </body>
</html>
